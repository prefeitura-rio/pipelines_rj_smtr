version: 2

models:
  - name: balanco_consorcio_ano
    latest_version: 2
    versions:
      - v: 1
        config:
          deprecation_date: 2023-12-31
      - v: 2
        config:
          alias: balanco_consorcio_ano
    description: "Balanço da receita aferida e esperada por consórcio e ano para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
    columns:
      - name: ano
        description: "{{ doc('ano') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: km_apurada
        description: "{{ doc('km_apurada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: balanco_consorcio_dia
    latest_version: 2
    versions:
      - v: 1
        config:
          deprecation_date: 2023-12-31
      - v: 2
        config:
          alias: balanco_consorcio_dia
    description: "Balanço da receita aferida e esperada por consórcio e dia para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
    columns:
      - name: data
        description: "{{ doc('data') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: balanco_servico_ano
    latest_version: 2
    versions:
      - v: 1
        config:
          deprecation_date: 2023-12-31
      - v: 2
        config:
          alias: balanco_servico_ano
    description: "Balanço da receita aferida e esperada por serviço e ano para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
    columns:
      - name: ano
        description: "{{ doc('ano') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: servico
        description: "{{ doc('servico') }}"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: balanco_servico_dia
    latest_version: 2
    versions:
      - v: 1
        config:
          deprecation_date: 2023-12-31
      - v: 2
        config:
          alias: balanco_servico_dia
    description: "Balanço da receita aferida e esperada por servico e dia para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025"
    tests:
      - dbt_utils.unique_combination_of_columns:
            combination_of_columns:
            - data
            - servico
            name: dbt_utils.unique_combination_of_columns__data_servico__balanco_servico_dia
    columns:
      - name: data
        description: "{{ doc('data') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: servico
        description: "{{ doc('servico') }}"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: balanco_servico_dia_pos_gt
    description: "Balanço da receita aferida e esperada por servico e dia para serviços-dia subsidiados após alterações do Grupo de Trabalho [Processo.Rio MTR-PRO-2024/06270]. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024, 02/2024 e 01/2025."
    deprecation_date: 2023-12-31
    columns:
      - name: data
        description: "{{ doc('data') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: servico
        description: "{{ doc('servico') }}"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: balanco_servico_quinzena
    latest_version: 2
    versions:
      - v: 1
        config:
          deprecation_date: 2023-12-31
      - v: 2
        config:
          alias: balanco_servico_quinzena
    description: "Balanço da receita aferida e esperada por serviço e quinzena para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
    columns:
      - name: quinzena
        description: "{{ doc('quinzena') }}"
      - name: data_inicial_quinzena
        description: "{{ doc('data_inicial_quinzena') }}"
      - name: data_final_quinzena
        description: "{{ doc('data_final_quinzena') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: servico
        description: "{{ doc('servico') }}"
      - name: quantidade_dias_subsidiado
        description: "Quantidade de dias em que o serviço recebeu subsídio na quinzena"
      - name: km_subsidiada
        description: "{{ doc('km_subsidiada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: receita_tarifaria_servico_nao_identificado_quinzena
    description: "Receita tarifária proveniente do RDO para serviços de ônibus dos consórcios que não foram identificados nos planos operacionais dos respectivos dias."
    deprecation_date: 2023-12-31
    columns:
      - name: quinzena
        description: "{{ doc('quinzena') }}"
      - name: data_inicial_quinzena
        description: "{{ doc('data_inicial_quinzena') }}"
      - name: data_final_quinzena
        description: "{{ doc('data_final_quinzena') }}"
      - name: consorcio_rdo
        description: "{{ doc('consorcio') }} informado no RDO"
      - name: servico_tratado_rdo
        description: "Serviço tratado (linha) extraído do campo 'linha' do RDO, após tratamento"
      - name: linha_rdo
        description: "{{ doc('servico') }} conforme declarada no RDO"
      - name: tipo_servico_rdo
        description: "{{ doc('tipo_servico') }}"
      - name: ordem_servico_rdo
        description: "{{ doc('ordem_servico') }}"
      - name: quantidade_dias_rdo
        description: "Quantidade de dias em que o serviço foi encontrado no RDO na respectiva quinzena"
      - name: receita_tarifaria_aferida_rdo
        description: "{{ doc('receita_tarifaria_aferida') }}"
  - name: servico_dia_atipico
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: servico_dia_atipico
    description: "Serviços-dia com ocorrências que impactam a apuração. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
  - name: aux_rdo_servico_dia
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: aux_rdo_servico_dia
    description: "Receita tarifária aferida por serviço-dia a partir dos registros do RDO com correção dos serviços sem planejamento."
  - name: aux_subsidio_servico_dia
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: aux_subsidio_servico_dia
    description: "Quilometragem apurada e subsídio pago por serviço-dia a partir com correção dos serviços sem receita."
  - name: staging_encontro_contas_servico_dia
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: staging_encontro_contas_servico_dia
    description: "Quilometragem planejada, apurada e Percentual de Operação Diária (POD) por serviço-dia."
  - name: balanco_consorcio_mes
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: balanco_consorcio_mes
    description: "Balanço da receita aferida e esperada por consórcio, mês e ano para serviços-dia subsidiados. Ver metodologia nas notas técnicas TR/SUBTT Nº 01/2024 e 01/2025."
    columns:
      - name: ano
        description: "{{ doc('ano') }}"
      - name: consorcio
        description: "{{ doc('consorcio') }}"
      - name: km_apurada
        description: "{{ doc('km_apurada') }}"
      - name: receita_total_esperada
        description: "{{ doc('receita_total_esperada') }}"
      - name: receita_tarifaria_esperada
        description: "{{ doc('receita_tarifaria_esperada') }}"
      - name: subsidio_esperado
        description: "{{ doc('subsidio_esperado') }}"
      - name: subsidio_glosado
        description: "{{ doc('subsidio_glosado') }}"
      - name: receita_total_aferida
        description: "{{ doc('receita_total_aferida') }}"
      - name: receita_tarifaria_aferida
        description: "{{ doc('receita_tarifaria_aferida') }}"
      - name: subsidio_pago
        description: "{{ doc('subsidio_pago') }}"
      - name: saldo
        description: "{{ doc('saldo') }}"
  - name: correcao_servico_rdo
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: correcao_servico_rdo
    description: "Correção de serviços-dia sem planejamento porém com receita tarifária e com subsídio pago, mas sem receita tarifária"
  - name: receita_tarifaria_servico_dia_sem_associacao
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: receita_tarifaria_servico_dia_sem_associacao
    description: "Serviços-dia sem planejamento porém com receita tarifária e com subsídio pago, mas sem receita tarifária"
  - name: encontro_contas_subsidio_sumario_servico_dia
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: encontro_contas_subsidio_sumario_servico_dia
    description: "Sumário do subsídio dos serviços de ônibus [SPPO] por dia para fins do Encontro de Contas"
  - name: encontro_contas_parametros
    latest_version: 2
    versions:
      - v: 2
        config:
          alias: encontro_contas_parametros
    description: "Parâmetros utilizados para o cálculo do Encontro de Contas dos serviços de ônibus [SPPO]"